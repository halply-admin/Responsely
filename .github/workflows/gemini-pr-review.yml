# .github/workflows/pr-gemini-review.yml
name: Gemini PR Review

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write

jobs:
  gemini-pr-review:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run Gemini CLI for PR review
        uses: google-github-actions/run-gemini-cli@v0
        with:
          args: |
            review-pr \
              --github-token ${{ secrets.GITHUB_TOKEN }} \
              --repo ${{ github.repository }} \
              --pr-number ${{ github.event.pull_request.number }} \
              --model "gemini-1.5-pro-latest" \
              --comment
        env:
          GOOGLE_APPLICATION_CREDENTIALS: ${{ secrets.GCP_SERVICE_ACCOUNT_KEY }}
